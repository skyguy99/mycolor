{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/skylarthomas/Desktop/Client Work/Ayzenberg /Dev/myCOLOR App/mycolor_v3/FloatingMenu/components/FloatingMenu/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FloatingItem from \"../FloatingItem\";\nimport { Colors, Design, MenuPositions } from \"../../constants\";\nimport { applyButtonWidth, applyButtonInnerWidthFirst, applyButtonInnerWidthSecond } from \"../../helpers\";\nimport globalStyles from \"../../styles\";\nimport styles from \"./styles\";\nvar isSelectingSecondColor = false;\nglobal.isinLongPress = false;\n\nvar FloatingMenu = function (_React$PureComponent) {\n  _inherits(FloatingMenu, _React$PureComponent);\n\n  var _super = _createSuper(FloatingMenu);\n\n  function FloatingMenu() {\n    var _this;\n\n    _classCallCheck(this, FloatingMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      dimmerActive: false,\n      menuButtonDown: false,\n      itemsDown: {},\n      items: [],\n      isAnimated: false\n    };\n    _this.menuPressAnimation = new Animated.Value(0);\n    _this.gradientBackgroundColor = new Animated.Value(0);\n    _this.itemPressAnimations = {};\n    _this.itemFanAnimations = {};\n    _this.dimmerTimeout = null;\n\n    _this.endBackgroundColorAnimation = function () {\n      Animated.timing(_this.gradientBackgroundColor, {\n        toValue: 0,\n        duration: 15000,\n        easing: Easing.easeOut,\n        useNativeDriver: false\n      }).start(function () {\n        _this.gradientBackgroundColor = new Animated.Value(0);\n\n        _this.startBackgroundColorAnimation();\n      });\n    };\n\n    _this.startBackgroundColorAnimation = function () {\n      Animated.timing(_this.gradientBackgroundColor, {\n        toValue: 180,\n        duration: 15000,\n        easing: Easing.easeOut,\n        useNativeDriver: false\n      }).start(function () {\n        _this.endBackgroundColorAnimation();\n      });\n    };\n\n    _this.initAnimations = function () {\n      var items = _this.state.items;\n      if (!_this.menuPressAnimation) _this.menuPressAnimation = new Animated.Value(0);\n\n      for (var i = 0; i < items.length; i++) {\n        if (!_this.itemPressAnimations[i]) {\n          _this.itemPressAnimations[i] = new Animated.Value(0);\n        }\n\n        if (i < items.length && !_this.itemFanAnimations[i]) {\n          _this.itemFanAnimations[i] = new Animated.Value(0);\n        }\n      }\n    };\n\n    _this.handleItemPressIn = function (index, animatedValue) {\n      var useNativeDriver = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return function () {\n        Animated.timing(animatedValue, {\n          toValue: 1.0,\n          duration: 14,\n          useNativeDriver: useNativeDriver\n        }).start();\n\n        if (index === null) {\n          _this.setState({\n            menuButtonDown: true\n          });\n        } else {\n          _this.setState({\n            itemsDown: _objectSpread(_objectSpread({}, _this.state.itemsDown), {}, _defineProperty({}, index, true))\n          });\n        }\n      };\n    };\n\n    _this.handleItemPressOut = function (index, animatedValue) {\n      var useNativeDriver = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return function () {\n        Animated.timing(animatedValue, {\n          toValue: 0.0,\n          duration: 142,\n          useNativeDriver: useNativeDriver\n        }).start();\n\n        if (index === null) {\n          _this.setState({\n            menuButtonDown: false\n          });\n        } else {\n          _this.setState({\n            itemsDown: _objectSpread(_objectSpread({}, _this.state.itemsDown), {}, _defineProperty({}, index, false))\n          });\n        }\n      };\n    };\n\n    _this.handleItemPress = function (index) {\n      return function () {\n        var onItemPress = _this.props.onItemPress;\n        var items = _this.state.items;\n        var item = items[index];\n        if (!item) return;\n\n        if (item.onPress) {\n          item.onPress(item, index);\n        } else if (onItemPress) {\n          onItemPress(item, index);\n        }\n      };\n    };\n\n    _this.handleMenuPress = function () {\n      var _this$props = _this.props,\n          isOpen = _this$props.isOpen,\n          onMenuToggle = _this$props.onMenuToggle;\n      onMenuToggle(!isOpen);\n      global.isinLongPress = false;\n    };\n\n    _this.handleLongMenuPress = function () {\n      var _this$props2 = _this.props,\n          isOpen = _this$props2.isOpen,\n          onMenuToggle = _this$props2.onMenuToggle;\n      onMenuToggle(true);\n      global.isinLongPress = true;\n      console.log(\"long menu press \", global.isinLongPress);\n    };\n\n    _this.toggleMenu = function (isOpen) {\n      var _this$props3 = _this.props,\n          openEase = _this$props3.openEase,\n          closeEase = _this$props3.closeEase;\n      var items = _this.state.items;\n      var options = {\n        toValue: isOpen ? 1.0 : 0.0,\n        duration: 142 - Math.max(items.length - 2, 0) * 5,\n        tension: 30,\n        friction: 5,\n        useNativeDriver: true\n      };\n      var totalDelay = 0;\n\n      var _loop = function _loop(i) {\n        var t = (isOpen ? i : items.length - i - 1) / items.length;\n        var ease = isOpen ? openEase(t) : closeEase(t);\n        var time = 150 / Math.min(Math.max(items.length, 0), 8) * i + 160;\n        var delay = Math.max(Math.min(time * ease, 300), 0);\n        totalDelay = delay + time;\n        Animated.delay(delay).start(function () {\n          Animated.spring(_this.itemFanAnimations[i], options).start();\n        });\n      };\n\n      for (var i = 0; i < items.length; i++) {\n        _loop(i);\n      }\n\n      _this.dimmerTimeout && clearTimeout(_this.dimmerTimeout);\n\n      if (isOpen) {\n        _this.setState({\n          dimmerActive: true\n        });\n      } else {\n        _this.dimmerTimeout = setTimeout(function () {\n          _this.setState({\n            dimmerActive: false\n          });\n        }, totalDelay);\n      }\n    };\n\n    _this.onSpringCompletion = function () {\n      Animated.parallel([Animated.spring(_this.buttonSizeAnimated, {\n        useNativeDriver: false,\n        toValue: Design.buttonWidth * 0.9,\n        duration: 1000,\n        easing: Easing.bounce\n      }), Animated.spring(_this.splitButtonSizeAnimated, {\n        useNativeDriver: false,\n        toValue: Design.buttonWidth * 0.5 * 0.9,\n        duration: 1000,\n        easing: Easing.bounce\n      })]).start(function () {\n        _this.spring();\n      });\n    };\n\n    _this.spring = function () {\n      Animated.parallel([Animated.spring(_this.buttonSizeAnimated, {\n        useNativeDriver: false,\n        toValue: Design.buttonWidth * 1.1,\n        duration: 1000,\n        easing: Easing.bounce\n      }), Animated.spring(_this.splitButtonSizeAnimated, {\n        useNativeDriver: false,\n        toValue: Design.buttonWidth * 0.5 * 1.1,\n        duration: 1000,\n        easing: Easing.bounce\n      })]).start(function () {\n        _this.onSpringCompletion();\n      });\n    };\n\n    _this.renderItems = function () {\n      var _this$props4 = _this.props,\n          isOpen = _this$props4.isOpen,\n          position = _this$props4.position,\n          renderItemIcon = _this$props4.renderItemIcon,\n          buttonWidth = _this$props4.buttonWidth,\n          innerWidth = _this$props4.innerWidth,\n          backgroundColor = _this$props4.backgroundColor,\n          borderColor = _this$props4.borderColor,\n          iconColor = _this$props4.iconColor,\n          primaryColor = _this$props4.primaryColor;\n      var _this$state = _this.state,\n          items = _this$state.items,\n          itemsDown = _this$state.itemsDown,\n          dimmerActive = _this$state.dimmerActive;\n      if (!dimmerActive) return null;\n      return items.map(function (item, index) {\n        if (item.color != primaryColor) {\n          return React.createElement(FloatingItem, _extends({\n            key: \"item-\" + index\n          }, item, {\n            item: item,\n            index: index,\n            icon: null,\n            position: position,\n            isOpen: isOpen || dimmerActive,\n            backgroundColor: item.color,\n            borderColor: item.color,\n            iconColor: iconColor,\n            primaryColor: item.color,\n            selectedColor: primaryColor,\n            buttonWidth: buttonWidth,\n            innerWidth: innerWidth,\n            numItems: items.length,\n            itemsDown: itemsDown,\n            itemFanAnimations: _this.itemFanAnimations,\n            itemPressAnimations: _this.itemPressAnimations,\n            onPress: _this.handleItemPress(index),\n            onPressIn: _this.handleItemPressIn(index, _this.itemPressAnimations[index]),\n            onPressOut: _this.handleItemPressOut(index, _this.itemPressAnimations[index]),\n            isInLongPress: global.isinLongPress,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 11\n            }\n          }));\n        }\n      });\n    };\n\n    _this.renderMenuButton = function () {\n      var _this$props5 = _this.props,\n          renderMenuIcon = _this$props5.renderMenuIcon,\n          isOpen = _this$props5.isOpen,\n          _backgroundColor = _this$props5.backgroundColor,\n          _borderColor = _this$props5.borderColor,\n          _iconColor = _this$props5.iconColor,\n          primaryColor = _this$props5.primaryColor,\n          buttonWidth = _this$props5.buttonWidth,\n          innerWidth = _this$props5.innerWidth;\n      var _this$state2 = _this.state,\n          menuButtonDown = _this$state2.menuButtonDown,\n          dimmerActive = _this$state2.dimmerActive;\n      isSelectingSecondColor = primaryColor != \"#ffffff\";\n      var bgColor = _backgroundColor || primaryColor;\n      var iconColor = primaryColor;\n      var borderColor = _borderColor;\n      var backgroundColor = primaryColor;\n      _this.buttonSizeAnimated = new Animated.Value(Design.buttonWidth * 0.9);\n      _this.splitButtonSizeAnimated = new Animated.Value(Design.buttonWidth * 0.9 * 0.5);\n      var content = renderMenuIcon ? renderMenuIcon(_objectSpread({}, _this.state)) : React.createElement(Text, {\n        style: [globalStyles.missingIcon, isOpen ? styles.closeIcon : styles.menuIcon, {\n          color: menuButtonDown ? \"#fff\" : iconColor\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 7\n        }\n      }, isOpen ? \"\" : \"\");\n      return React.createElement(View, {\n        style: [globalStyles.buttonOuter, applyButtonWidth(buttonWidth), {\n          borderColor: borderColor\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: (globalStyles.button, {\n          flexDirection: \"row\"\n        }),\n        onLongPress: _this.handleLongMenuPress,\n        onPressIn: _this.handleItemPressIn(null, _this.menuPressAnimation),\n        onPressOut: _this.handleItemPressOut(null, _this.menuPressAnimation),\n        onPress: _this.handleMenuPress,\n        hitSlop: {\n          top: 10,\n          left: 10,\n          right: 10,\n          bottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 9\n        }\n      }, React.createElement(Animated.View, {\n        style: [globalStyles.buttonInner, applyButtonInnerWidthFirst(innerWidth), {\n          display: global.lastColor != \"transparent\" ? \"flex\" : \"none\",\n          backgroundColor: global.lastColor != \"transparent\" ? global.lastColor : \"transparent\"\n        }, isSelectingSecondColor && !dimmerActive && global.lastColor == \"transparent\" && {\n          width: _this.buttonSizeAnimated,\n          height: _this.buttonSizeAnimated,\n          borderRadius: Design.buttonWidth * 1.1 * 0.5\n        }, global.lastColor != \"transparent\" && !dimmerActive && {\n          width: _this.splitButtonSizeAnimated,\n          height: _this.buttonSizeAnimated,\n          borderTopLeftRadius: Design.buttonWidth * 1.1 * 0.5,\n          borderBottomLeftRadius: Design.buttonWidth * 1.1 * 0.5\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          display: \"flex\",\n          backgroundColor: \"red\",\n          width: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }\n      }), content), React.createElement(Animated.View, {\n        style: [globalStyles.buttonInner, global.lastColor != \"transparent\" ? applyButtonInnerWidthSecond(innerWidth) : applyButtonWidth(innerWidth), {\n          backgroundColor: backgroundColor\n        }, isSelectingSecondColor && !dimmerActive && global.lastColor == \"transparent\" && {\n          width: _this.buttonSizeAnimated,\n          height: _this.buttonSizeAnimated,\n          borderRadius: Design.buttonWidth * 1.1 * 0.5\n        }, global.lastColor != \"transparent\" && !dimmerActive && {\n          width: _this.splitButtonSizeAnimated,\n          height: _this.buttonSizeAnimated,\n          borderTopRightRadius: Design.buttonWidth * 1.1 * 0.5,\n          borderBottomRightRadius: Design.buttonWidth * 1.1 * 0.5\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        style: {\n          display: primaryColor == \"#ffffff\" ? \"flex\" : \"none\",\n          width: Design.buttonWidth - 5,\n          height: Design.buttonWidth - 5,\n          marginTop: 14\n        },\n        source: require(\"../../../assets/rainbowcircle.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }\n      }), content)));\n    };\n\n    _this.renderDimmer = function () {\n      var _this$props6 = _this.props,\n          isOpen = _this$props6.isOpen,\n          dimmerStyle = _this$props6.dimmerStyle;\n      var _this$state3 = _this.state,\n          items = _this$state3.items,\n          dimmerActive = _this$state3.dimmerActive;\n      var fanAnimation = _this.itemFanAnimations[0];\n      var opacity = fanAnimation && fanAnimation.interpolate({\n        inputRange: [0.0, 1.0],\n        outputRange: [0.5, 1.0],\n        extrapolate: \"clamp\"\n      });\n      return dimmerActive && items.length ? React.createElement(TouchableWithoutFeedback, {\n        disabled: !isOpen,\n        onPress: _this.handleMenuPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 7\n        }\n      }, React.createElement(Animated.View, {\n        style: [globalStyles.dimmer, styles.dimmer, dimmerStyle, {\n          opacity: opacity\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 9\n        }\n      })) : null;\n    };\n\n    _this.render = function () {\n      var _ref;\n\n      var position = _this.props.position;\n\n      var _position$split = position.split(\"-\"),\n          _position$split2 = _slicedToArray(_position$split, 2),\n          vPos = _position$split2[0],\n          hPos = _position$split2[1];\n\n      return React.createElement(View, {\n        style: styles.container,\n        pointerEvents: \"box-none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: [styles.itemContainer, (_ref = {}, _defineProperty(_ref, vPos, 38), _defineProperty(_ref, hPos, 38), _defineProperty(_ref, \"flexDirection\", vPos.toLowerCase() === \"bottom\" ? \"column\" : \"column-reverse\"), _ref)],\n        pointerEvents: \"box-none\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 9\n        }\n      }, _this.renderItems(), _this.renderMenuButton()));\n    };\n\n    return _this;\n  }\n\n  _createClass(FloatingMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initAnimations();\n      this.spring();\n\n      if (this.gradientBackgroundColor._value === 0) {\n        this.startBackgroundColorAnimation();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var isOpen = this.props.isOpen;\n      var items = this.state.items;\n\n      if (prevProps.items.length !== items.length) {\n        this.initAnimations();\n      }\n\n      if (prevProps.isOpen && !isOpen) {\n        this.toggleMenu(false);\n      } else if (!prevProps.isOpen && isOpen) {\n        this.toggleMenu(true);\n      }\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var items = nextProps.items;\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        items: _toConsumableArray(items).reverse()\n      });\n    }\n  }]);\n\n  return FloatingMenu;\n}(React.PureComponent);\n\nFloatingMenu.defaultProps = {\n  items: [],\n  primaryColor: Colors.primaryColor,\n  buttonWidth: Design.buttonWidth,\n  innerWidth: Design.buttonWidth - 12,\n  position: MenuPositions.bottomRight,\n  isInLongPress: isinLongPress,\n  openEase: function openEase(t) {\n    return --t * t * t + 1;\n  },\n  closeEase: function closeEase(t) {\n    return t * t * t;\n  }\n};\nexport default FloatingMenu;","map":{"version":3,"sources":["/Users/skylarthomas/Desktop/Client Work/Ayzenberg /Dev/myCOLOR App/mycolor_v3/FloatingMenu/components/FloatingMenu/index.js"],"names":["React","FloatingItem","Colors","Design","MenuPositions","applyButtonWidth","applyButtonInnerWidthFirst","applyButtonInnerWidthSecond","globalStyles","styles","isSelectingSecondColor","global","isinLongPress","FloatingMenu","state","dimmerActive","menuButtonDown","itemsDown","items","isAnimated","menuPressAnimation","Animated","Value","gradientBackgroundColor","itemPressAnimations","itemFanAnimations","dimmerTimeout","endBackgroundColorAnimation","timing","toValue","duration","easing","Easing","easeOut","useNativeDriver","start","startBackgroundColorAnimation","initAnimations","i","length","handleItemPressIn","index","animatedValue","setState","handleItemPressOut","handleItemPress","onItemPress","props","item","onPress","handleMenuPress","isOpen","onMenuToggle","handleLongMenuPress","console","log","toggleMenu","openEase","closeEase","options","Math","max","tension","friction","totalDelay","t","ease","time","min","delay","spring","clearTimeout","setTimeout","onSpringCompletion","parallel","buttonSizeAnimated","buttonWidth","bounce","splitButtonSizeAnimated","renderItems","position","renderItemIcon","innerWidth","backgroundColor","borderColor","iconColor","primaryColor","map","color","renderMenuButton","renderMenuIcon","_backgroundColor","_borderColor","_iconColor","bgColor","content","missingIcon","closeIcon","menuIcon","buttonOuter","button","flexDirection","top","left","right","bottom","buttonInner","display","lastColor","width","height","borderRadius","borderTopLeftRadius","borderBottomLeftRadius","borderTopRightRadius","borderBottomRightRadius","marginTop","require","renderDimmer","dimmerStyle","fanAnimation","opacity","interpolate","inputRange","outputRange","extrapolate","dimmer","render","split","vPos","hPos","container","itemContainer","toLowerCase","_value","prevProps","nextProps","prevState","reverse","PureComponent","defaultProps","bottomRight","isInLongPress"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Text, View, TouchableWithoutFeedback, TouchableOpacity, Animated, Easing, ImageBackground, Image } from 'react-native';\r\n\r\nimport FloatingItem from '../FloatingItem';\r\nimport { Colors, Design, MenuPositions } from '../../constants';\r\nimport { applyButtonWidth, applyButtonInnerWidthFirst, applyButtonInnerWidthSecond } from '../../helpers';\r\n\r\nimport globalStyles from '../../styles';\r\nimport styles from './styles';\r\n\r\nvar isSelectingSecondColor = false;\r\nglobal.isinLongPress = false;\r\n\r\nclass FloatingMenu extends React.PureComponent {\r\n  state = {\r\n    dimmerActive: false,\r\n    menuButtonDown: false,\r\n    itemsDown: {},\r\n    items: [],\r\n    isAnimated: false,\r\n  };\r\n\r\n  menuPressAnimation = new Animated.Value(0);\r\n  gradientBackgroundColor = new Animated.Value(0);\r\n  itemPressAnimations = {};\r\n  itemFanAnimations = {};\r\n  dimmerTimeout = null;\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const { items } = nextProps;\r\n\r\n    return {\r\n      ...prevState,\r\n      items: [...items].reverse(),\r\n    };\r\n  }\r\n\r\n  endBackgroundColorAnimation = () => {\r\n    Animated.timing(this.gradientBackgroundColor, {\r\n      toValue: 0,\r\n      duration: 15000,\r\n      easing: Easing.easeOut,\r\n      useNativeDriver: false,\r\n    }).start(() => {\r\n      this.gradientBackgroundColor = new Animated.Value(0);\r\n      this.startBackgroundColorAnimation();\r\n    });\r\n  };\r\n\r\n  startBackgroundColorAnimation = () => {\r\n    Animated.timing(this.gradientBackgroundColor, {\r\n      toValue: 180,\r\n      duration: 15000,\r\n      easing: Easing.easeOut,\r\n      useNativeDriver: false,\r\n    }).start(() => {\r\n      this.endBackgroundColorAnimation();\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.initAnimations();\r\n    this.spring();\r\n\r\n    if (this.gradientBackgroundColor._value === 0) {\r\n      this.startBackgroundColorAnimation();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { isOpen } = this.props;\r\n    const { items } = this.state;\r\n\r\n    if (prevProps.items.length !== items.length) {\r\n      this.initAnimations();\r\n    }\r\n\r\n    if (prevProps.isOpen && !isOpen) {\r\n      // Close menu\r\n      this.toggleMenu(false);\r\n    } else if (!prevProps.isOpen && isOpen) {\r\n      // Open menu\r\n      this.toggleMenu(true);\r\n    }\r\n  }\r\n\r\n  initAnimations = () => {\r\n    const { items } = this.state;\r\n\r\n    if (!this.menuPressAnimation)\r\n      this.menuPressAnimation = new Animated.Value(0);\r\n    for (let i = 0; i < items.length; i++) {\r\n      if (!this.itemPressAnimations[i]) {\r\n        this.itemPressAnimations[i] = new Animated.Value(0);\r\n      }\r\n      if (i < items.length && !this.itemFanAnimations[i]) {\r\n        this.itemFanAnimations[i] = new Animated.Value(0);\r\n      }\r\n    }\r\n  };\r\n\r\n  handleItemPressIn = (index, animatedValue, useNativeDriver = false) => () => {\r\n    // Animate in\r\n    Animated.timing(animatedValue, {\r\n      toValue: 1.0,\r\n      duration: 14,\r\n      useNativeDriver,\r\n    }).start();\r\n\r\n    if (index === null) {\r\n      this.setState({ menuButtonDown: true });\r\n    } else {\r\n      this.setState({ itemsDown: { ...this.state.itemsDown, [index]: true } });\r\n    }\r\n  };\r\n\r\n  handleItemPressOut = (\r\n    index,\r\n    animatedValue,\r\n    useNativeDriver = false\r\n  ) => () => {\r\n    // Animate out\r\n    Animated.timing(animatedValue, {\r\n      toValue: 0.0,\r\n      duration: 142,\r\n      useNativeDriver,\r\n    }).start();\r\n\r\n    if (index === null) {\r\n      this.setState({ menuButtonDown: false });\r\n    } else {\r\n      this.setState({ itemsDown: { ...this.state.itemsDown, [index]: false } });\r\n    }\r\n  };\r\n\r\n  handleItemPress = (index) => () => {\r\n    const { onItemPress } = this.props;\r\n    const { items } = this.state;\r\n    const item = items[index];\r\n\r\n    //console.log('Pressing: ', item);\r\n\r\n    if (!item) return;\r\n\r\n    if (item.onPress) {\r\n      item.onPress(item, index);\r\n    } else if (onItemPress) {\r\n      onItemPress(item, index);\r\n    }\r\n  };\r\n\r\n  handleMenuPress = () => {\r\n    const { isOpen, onMenuToggle } = this.props;\r\n\r\n    onMenuToggle(!isOpen);\r\n\r\n    global.isinLongPress = false;\r\n  };\r\n\r\n  handleLongMenuPress = () => {\r\n    const { isOpen, onMenuToggle } = this.props;\r\n\r\n    onMenuToggle(true);\r\n    global.isinLongPress = true;\r\n\r\n    console.log(\"long menu press \", global.isinLongPress);\r\n  };\r\n\r\n  toggleMenu = (isOpen) => {\r\n    const { openEase, closeEase } = this.props;\r\n    const { items } = this.state;\r\n\r\n    const options = {\r\n      toValue: isOpen ? 1.0 : 0.0,\r\n      duration: 142 - Math.max(items.length - 2, 0) * 5,\r\n      tension: 30,\r\n      friction: 5,\r\n      useNativeDriver: true,\r\n    };\r\n\r\n    // Fan items\r\n    let totalDelay = 0;\r\n    for (let i = 0; i < items.length; i++) {\r\n      const t = (isOpen ? i : items.length - i - 1) / items.length;\r\n      const ease = isOpen ? openEase(t) : closeEase(t);\r\n      const time = (150 / Math.min(Math.max(items.length, 0), 8)) * i + 160;\r\n      const delay = Math.max(Math.min(time * ease, 300), 0);\r\n\r\n      totalDelay = delay + time;\r\n\r\n      Animated.delay(delay).start(() => {\r\n        Animated.spring(this.itemFanAnimations[i], options).start();\r\n      });\r\n    }\r\n\r\n    // Toggle dimmer\r\n    this.dimmerTimeout && clearTimeout(this.dimmerTimeout);\r\n    if (isOpen) {\r\n      this.setState({ dimmerActive: true });\r\n    } else {\r\n      // Deactivate dimmer after animation completes\r\n      this.dimmerTimeout = setTimeout(() => {\r\n        this.setState({ dimmerActive: false });\r\n      }, totalDelay);\r\n    }\r\n  };\r\n\r\n  //Animate button size\r\n  onSpringCompletion = () => {\r\n    Animated.parallel([\r\n      Animated.spring(this.buttonSizeAnimated, {\r\n        useNativeDriver: false,\r\n        toValue: Design.buttonWidth * 0.9,\r\n        duration: 1000,\r\n        easing: Easing.bounce,\r\n      }),\r\n      Animated.spring(this.splitButtonSizeAnimated, {\r\n        useNativeDriver: false,\r\n        toValue: Design.buttonWidth * 0.5 * 0.9,\r\n        duration: 1000,\r\n        easing: Easing.bounce,\r\n      }),\r\n    ]).start(() => {\r\n      this.spring();\r\n    });\r\n  };\r\n\r\n  spring = () => {\r\n    Animated.parallel([\r\n      Animated.spring(this.buttonSizeAnimated, {\r\n        useNativeDriver: false,\r\n        toValue: Design.buttonWidth * 1.1,\r\n        duration: 1000,\r\n        easing: Easing.bounce,\r\n      }),\r\n      Animated.spring(this.splitButtonSizeAnimated, {\r\n        useNativeDriver: false,\r\n        toValue: Design.buttonWidth * 0.5 * 1.1,\r\n        duration: 1000,\r\n        easing: Easing.bounce,\r\n      }),\r\n    ]).start(() => {\r\n      this.onSpringCompletion();\r\n    });\r\n  };\r\n\r\n  renderItems = () => {\r\n    const {\r\n      isOpen,\r\n      position,\r\n      renderItemIcon,\r\n      buttonWidth,\r\n      innerWidth,\r\n      backgroundColor,\r\n      borderColor,\r\n      iconColor,\r\n      primaryColor,\r\n    } = this.props;\r\n    const { items, itemsDown, dimmerActive } = this.state;\r\n\r\n    if (!dimmerActive) return null;\r\n\r\n    return items.map((item, index) => {\r\n      if (item.color != primaryColor) {\r\n        return (\r\n          <FloatingItem\r\n            key={`item-${index}`}\r\n            {...item}\r\n            item={item}\r\n            index={index}\r\n            icon={null}\r\n            position={position}\r\n            isOpen={isOpen || dimmerActive}\r\n            backgroundColor={item.color}\r\n            borderColor={item.color}\r\n            iconColor={iconColor}\r\n            primaryColor={item.color}\r\n            selectedColor={primaryColor}\r\n            buttonWidth={buttonWidth}\r\n            innerWidth={innerWidth}\r\n            numItems={items.length}\r\n            itemsDown={itemsDown}\r\n            itemFanAnimations={this.itemFanAnimations}\r\n            itemPressAnimations={this.itemPressAnimations}\r\n            onPress={this.handleItemPress(index)}\r\n            onPressIn={this.handleItemPressIn(\r\n              index,\r\n              this.itemPressAnimations[index]\r\n            )}\r\n            onPressOut={this.handleItemPressOut(\r\n              index,\r\n              this.itemPressAnimations[index]\r\n            )}\r\n            isInLongPress={global.isinLongPress}\r\n          />\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  renderMenuButton = () => {\r\n    const {\r\n      renderMenuIcon,\r\n      isOpen,\r\n      backgroundColor: _backgroundColor,\r\n      borderColor: _borderColor,\r\n      iconColor: _iconColor,\r\n      primaryColor,\r\n      buttonWidth,\r\n      innerWidth,\r\n    } = this.props;\r\n    const { menuButtonDown, dimmerActive } = this.state;\r\n\r\n    isSelectingSecondColor = primaryColor != \"#ffffff\";\r\n\r\n    const bgColor = _backgroundColor || primaryColor;\r\n    const iconColor = primaryColor;\r\n    //const borderColor = isinLongPress ? 'blue' : _borderColor;\r\n    const borderColor = _borderColor;\r\n    //const backgroundColor = isinLongPress ? 'white' : primaryColor;\r\n    const backgroundColor = primaryColor;\r\n\r\n    this.buttonSizeAnimated = new Animated.Value(Design.buttonWidth * 0.9);\r\n    this.splitButtonSizeAnimated = new Animated.Value(\r\n      Design.buttonWidth * 0.9 * 0.5\r\n    );\r\n\r\n    const content = renderMenuIcon ? (\r\n      renderMenuIcon({ ...this.state })\r\n    ) : (\r\n      <Text\r\n        style={[\r\n          globalStyles.missingIcon,\r\n          isOpen ? styles.closeIcon : styles.menuIcon,\r\n          { color: menuButtonDown ? \"#fff\" : iconColor },\r\n        ]}\r\n      >\r\n        {isOpen ? \"\" : \"\"}\r\n      </Text>\r\n    );\r\n\r\n    return (\r\n      <View\r\n        style={[\r\n          globalStyles.buttonOuter,\r\n          applyButtonWidth(buttonWidth),\r\n          { borderColor },\r\n        ]}\r\n      >\r\n        <TouchableOpacity\r\n          style={(globalStyles.button, { flexDirection: \"row\" })}\r\n          onLongPress={this.handleLongMenuPress}\r\n          onPressIn={this.handleItemPressIn(null, this.menuPressAnimation)}\r\n          onPressOut={this.handleItemPressOut(null, this.menuPressAnimation)}\r\n          onPress={this.handleMenuPress}\r\n          hitSlop={{ top: 10, left: 10, right: 10, bottom: 10 }}\r\n        >\r\n          <Animated.View\r\n            style={[\r\n              globalStyles.buttonInner,\r\n              applyButtonInnerWidthFirst(innerWidth),\r\n              {\r\n                display: global.lastColor != \"transparent\" ? \"flex\" : \"none\",\r\n                //THIS CONTROLS SPLIT COLOR\r\n                backgroundColor:\r\n                  global.lastColor != \"transparent\"\r\n                    ? global.lastColor\r\n                    : \"transparent\",\r\n              },\r\n              isSelectingSecondColor &&\r\n                !dimmerActive &&\r\n                global.lastColor == \"transparent\" && {\r\n                  width: this.buttonSizeAnimated,\r\n                  height: this.buttonSizeAnimated,\r\n                  borderRadius: Design.buttonWidth * 1.1 * 0.5,\r\n                },\r\n              global.lastColor != \"transparent\" && !dimmerActive && {\r\n                width: this.splitButtonSizeAnimated,\r\n                height: this.buttonSizeAnimated,\r\n                borderTopLeftRadius: Design.buttonWidth * 1.1 * 0.5,\r\n                borderBottomLeftRadius: Design.buttonWidth * 1.1 * 0.5,\r\n              },\r\n            ]}\r\n          >\r\n            <View\r\n              style={{\r\n                display: \"flex\",\r\n                backgroundColor: \"red\",\r\n                width: 20,\r\n              }}\r\n            />\r\n            {content}\r\n          </Animated.View>\r\n          <Animated.View\r\n            style={[\r\n              globalStyles.buttonInner,\r\n              global.lastColor != \"transparent\"\r\n                ? applyButtonInnerWidthSecond(innerWidth)\r\n                : applyButtonWidth(innerWidth),\r\n              { backgroundColor },\r\n              isSelectingSecondColor &&\r\n                !dimmerActive &&\r\n                global.lastColor == \"transparent\" && {\r\n                  width: this.buttonSizeAnimated,\r\n                  height: this.buttonSizeAnimated,\r\n                  borderRadius: Design.buttonWidth * 1.1 * 0.5,\r\n                },\r\n              global.lastColor != \"transparent\" && !dimmerActive && {\r\n                width: this.splitButtonSizeAnimated,\r\n                height: this.buttonSizeAnimated,\r\n                borderTopRightRadius: Design.buttonWidth * 1.1 * 0.5,\r\n                borderBottomRightRadius: Design.buttonWidth * 1.1 * 0.5,\r\n              },\r\n            ]}\r\n          >\r\n            <Image\r\n              style={{\r\n                display: primaryColor == \"#ffffff\" ? \"flex\" : \"none\",\r\n                width: Design.buttonWidth - 5,\r\n                height: Design.buttonWidth - 5,\r\n                marginTop: 14,\r\n              }}\r\n              source={require(\"../../../assets/rainbowcircle.png\")}\r\n            ></Image>\r\n            {content}\r\n          </Animated.View>\r\n        </TouchableOpacity>\r\n      </View>\r\n    );\r\n  };\r\n\r\n  renderDimmer = () => {\r\n    const { isOpen, dimmerStyle } = this.props;\r\n    const { items, dimmerActive } = this.state;\r\n\r\n    const fanAnimation = this.itemFanAnimations[0];\r\n    const opacity =\r\n      fanAnimation &&\r\n      fanAnimation.interpolate({\r\n        inputRange: [0.0, 1.0],\r\n        outputRange: [0.5, 1.0],\r\n        extrapolate: \"clamp\",\r\n      });\r\n\r\n    return dimmerActive && items.length ? (\r\n      <TouchableWithoutFeedback\r\n        disabled={!isOpen}\r\n        onPress={this.handleMenuPress}\r\n      >\r\n        <Animated.View\r\n          style={[globalStyles.dimmer, styles.dimmer, dimmerStyle, { opacity }]}\r\n        />\r\n      </TouchableWithoutFeedback>\r\n    ) : null;\r\n  };\r\n\r\n  render = () => {\r\n    const { position } = this.props;\r\n\r\n    const [vPos, hPos] = position.split(\"-\");\r\n\r\n    return (\r\n      <View style={styles.container} pointerEvents=\"box-none\">\r\n        <View\r\n          style={[\r\n            styles.itemContainer,\r\n            {\r\n              [vPos]: 38,\r\n              [hPos]: 38,\r\n              flexDirection:\r\n                vPos.toLowerCase() === \"bottom\" ? \"column\" : \"column-reverse\",\r\n            },\r\n          ]}\r\n          pointerEvents=\"box-none\"\r\n        >\r\n          {this.renderItems()}\r\n          {this.renderMenuButton()}\r\n        </View>\r\n      </View>\r\n    );\r\n  };\r\n}\r\n\r\nFloatingMenu.defaultProps = {\r\n  items: [],\r\n  primaryColor: Colors.primaryColor,\r\n  buttonWidth: Design.buttonWidth,\r\n  innerWidth: Design.buttonWidth - 12,\r\n  position: MenuPositions.bottomRight,\r\n  isInLongPress: isinLongPress,\r\n  openEase: t => --t * t * t + 1,\r\n  closeEase: t => t * t * t\r\n};\r\n\r\nexport default FloatingMenu;\r\n"]},"metadata":{},"sourceType":"module"}